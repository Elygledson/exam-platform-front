<div class="exam">
  <h2>Formulário de Prova</h2>
  <form [formGroup]="form" (ngSubmit)="submit()" class="exam-form">
    <div class="exam-header">
      <mat-form-field class="medium-width">
        <input matInput formControlName="name" placeholder="Nome" required />
      </mat-form-field>

      <mat-form-field class="small-width">
        <input
          matInput
          formControlName="register"
          placeholder="Nº Matrícula"
          required
        />
      </mat-form-field>
    </div>

    <div class="questions" *ngFor="let question of questions; let i = index">
      <mat-card class="card-item">
        <mat-card-header class="card-header">
          <mat-card-title class="card-title">
            Questão {{ i + 1 }}
            <button
              mat-stroked-button
              [ngClass]="getDifficultyColor(question.level)"
            >
              {{ getLevelName(question.level) }}
            </button>
          </mat-card-title>
          <p>3/5</p>
        </mat-card-header>
        <mat-card-content class="card-content">
          <div class="question-text">
            <p>{{ question.description }}</p>
          </div>

          <p>Marque a alternativa correta:</p>
          <mat-radio-group
            aria-labelledby="options"
            class="example-radio-group"
          >
            <mat-radio-button
              color="primary"
              *ngFor="let option of question.options; let j = index"
              [ngClass]="{
                'correct-answer': submitted && question.answerIndex == j,
                'wrong-answer':
                  submitted &&
                  !question.userOption.isCorrect &&
                  question.userOption.choosen == j
              }"
              [value]="option"
              (change)="onAnswerSelected(i, j, $event.value)"
              [disabled]="submitted"
              >{{ option }}</mat-radio-button
            >
          </mat-radio-group>
        </mat-card-content>
      </mat-card>
    </div>
    <mat-card>
      <mat-card-content>{{ corrects }}/{{ questions.length }}</mat-card-content>
    </mat-card>
    <button
      type="submit"
      mat-raised-button
      color="primary"
      [disabled]="!form.valid"
    >
      Enviar
    </button>
  </form>
</div>
